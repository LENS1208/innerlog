# デモデータポリシー

## 原則

**デモデータはCSVファイルのみを使用します。データベースには一切保存しません。**

## 理由

1. **公開情報として扱う**
   - デモデータはログインなしで誰でも閲覧できる必要がある
   - データベースのRLSポリシーでは、認証ユーザーのデータを保護している
   - 匿名アクセスを許可すると、セキュリティリスクが高まる

2. **シンプルな設計**
   - CSVファイルは静的ファイルとして配信される
   - データベースのマイグレーションやRLSポリシーの変更が不要
   - 環境に依存しない（開発、ステージング、本番で同じデータ）

3. **メンテナンス性**
   - CSVファイルを更新するだけでデモデータを変更できる
   - データベースのバックアップやリストアの対象外
   - ユーザーデータと明確に分離される

## デモデータの配置

```
/public/demo/
  ├── A.csv    (デモデータセットA: 574件)
  ├── B.csv    (デモデータセットB: 574件)
  └── C.csv    (デモデータセットC: 574件)
```

## フロントエンドでの使用方法

`src/services/demoData.ts`の`getDataRows()`関数が、`useDatabase=false`の場合にCSVファイルを読み込みます。

```typescript
// CSVファイルから読み込む
const res = await fetch(`/demo/${datasetName}.csv?t=${Date.now()}`);
const text = await res.text();
const trades = parseCsvText(text);
```

## データベースについて

- **`dataset`カラムは将来的に削除予定**
  - 現在は`'default'`または`NULL`のみが有効
  - `'A'`, `'B'`, `'C'`は使用しない

- **デモデータは絶対にデータベースに保存しない**
  - マイグレーションファイルでデモデータを挿入してはいけない
  - スクリプトでデモデータを挿入してはいけない

## 禁止事項

❌ データベースにデモデータ（dataset='A'/'B'/'C'）を挿入すること
❌ RLSポリシーを緩めて匿名アクセスを許可すること
❌ マイグレーションファイルでデモデータを管理すること

## 許可事項

✅ `/public/demo/`フォルダのCSVファイルを更新すること
✅ CSVファイルの形式を維持すること
✅ 新しいデモデータセット（D.csv等）を追加すること
