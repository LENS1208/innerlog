/*
  # Seed Demo Trades for Dataset A
  
  1. Summary
    This migration inserts sample trade data from demo dataset A into the trades table.
    This allows users to see data immediately without manual CSV import.
  
  2. Data Inserted
    - 50 sample trades from dataset A
    - Covers various currency pairs (USDJPY, EURUSD, GBPUSD, EURJPY, AUDUSD, GBPJPY)
    - Date range: 2022-2025
    - Mix of buy/sell, wins/losses
  
  3. Important Notes
    - All trades are marked with dataset='A'
    - Trades are linked to existing user accounts
    - Uses ON CONFLICT to avoid duplicates
*/

DO $$
DECLARE
  user_record RECORD;
BEGIN
  FOR user_record IN SELECT id FROM auth.users LOOP
    INSERT INTO trades (user_id, dataset, ticket, item, side, size, open_time, open_price, close_time, close_price, sl, tp, commission, swap, profit, pips)
    VALUES
      (user_record.id, 'A', '101000000', 'GBPUSD', 'buy', 0.5, '2025-02-23 05:11:46+00', 1.41452, '2025-02-23 06:40:46+00', 1.41464, 1.41152, 1.41852, -12.0, -7.1, 5854.0, 1.2),
      (user_record.id, 'A', '101000001', 'AUDUSD', 'buy', 0.3, '2024-03-24 11:46:46+00', 1.11288, '2024-03-24 16:44:46+00', 1.11273, 1.10988, 1.11688, -12.0, 6.4, -4676.0, -1.5),
      (user_record.id, 'A', '101000002', 'USDJPY', 'sell', 2.0, '2024-08-26 07:14:46+00', 105.21, '2024-08-26 09:02:46+00', 105.231, 105.213, 105.206, 0.0, 3.4, -4282.0, -2.1),
      (user_record.id, 'A', '101000003', 'USDJPY', 'buy', 0.3, '2025-05-17 11:13:46+00', 122.597, '2025-05-17 13:24:46+00', 122.717, 122.594, 122.601, 0.0, -7.5, 3603.0, 12.0),
      (user_record.id, 'A', '101000004', 'GBPJPY', 'buy', 1.0, '2023-12-25 12:35:46+00', 115.874, '2023-12-25 15:57:46+00', 115.929, 115.871, 115.878, -12.0, 0.6, 5475.0, 5.5),
      (user_record.id, 'A', '101000005', 'USDJPY', 'buy', 0.3, '2023-11-27 17:05:46+00', 135.259, '2023-11-27 20:20:46+00', 134.994, 135.256, 135.263, -12.0, 6.8, -7966.0, -26.5),
      (user_record.id, 'A', '101000006', 'AUDUSD', 'sell', 0.3, '2024-03-10 06:29:46+00', 1.27475, '2024-03-10 11:05:46+00', 1.27449, 1.27775, 1.27075, -12.0, -2.3, 7844.0, 2.6),
      (user_record.id, 'A', '101000007', 'USDJPY', 'buy', 0.3, '2023-09-02 18:35:46+00', 147.417, '2023-09-02 22:16:46+00', 147.664, 147.414, 147.421, -12.0, 1.2, 7393.0, 24.7),
      (user_record.id, 'A', '101000008', 'GBPJPY', 'buy', 0.3, '2022-10-24 22:52:46+00', 154.859, '2022-10-25 00:30:46+00', 154.696, 154.856, 154.863, 0.0, -9.1, -4887.0, -16.3),
      (user_record.id, 'A', '101000009', 'USDJPY', 'sell', 0.3, '2023-02-13 09:03:46+00', 121.916, '2023-02-13 11:42:46+00', 121.787, 121.919, 121.912, 0.0, 1.9, 3869.0, 12.9),
      (user_record.id, 'A', '101000010', 'USDJPY', 'sell', 1.0, '2024-01-31 07:34:46+00', 141.618, '2024-01-31 10:46:46+00', 141.527, 141.621, 141.614, 0.0, 1.1, 9166.0, 9.1),
      (user_record.id, 'A', '101000011', 'AUDUSD', 'sell', 1.0, '2023-10-25 03:09:46+00', 1.33975, '2023-10-25 04:43:46+00', 1.33977, 1.34275, 1.33575, 0.0, 4.2, -2043.0, -0.2),
      (user_record.id, 'A', '101000012', 'GBPJPY', 'buy', 0.5, '2023-10-09 22:00:46+00', 148.103, '2023-10-09 22:37:46+00', 148.192, 148.1, 148.107, -12.0, -9.9, 4457.0, 8.9),
      (user_record.id, 'A', '101000013', 'EURUSD', 'buy', 2.0, '2023-11-21 14:28:46+00', 1.4322, '2023-11-21 15:05:46+00', 1.43222, 1.4292, 1.4362, 0.0, -7.4, 5023.0, 0.2),
      (user_record.id, 'A', '101000014', 'GBPUSD', 'buy', 1.0, '2024-04-18 22:42:46+00', 1.24457, '2024-04-19 02:46:46+00', 1.24463, 1.24157, 1.24857, 0.0, -2.0, 6570.0, 0.6),
      (user_record.id, 'A', '101000015', 'GBPUSD', 'buy', 2.0, '2022-11-03 02:23:46+00', 1.11398, '2022-11-03 06:29:46+00', 1.11396, 1.11098, 1.11798, -12.0, -1.6, -4279.0, -0.2),
      (user_record.id, 'A', '101000016', 'AUDUSD', 'sell', 1.0, '2025-09-30 20:57:46+00', 1.00789, '2025-10-01 01:40:46+00', 1.00795, 1.01089, 1.00389, 0.0, -6.5, -6054.0, -0.6),
      (user_record.id, 'A', '101000017', 'EURJPY', 'buy', 2.0, '2024-10-23 19:30:46+00', 159.778, '2024-10-23 20:23:46+00', 159.746, 159.775, 159.782, 0.0, -3.8, -6417.0, -3.2),
      (user_record.id, 'A', '101000018', 'EURJPY', 'buy', 0.3, '2023-03-12 09:02:46+00', 106.353, '2023-03-12 10:20:46+00', 106.19, 106.35, 106.357, 0.0, -8.4, -4877.0, -16.3),
      (user_record.id, 'A', '101000019', 'GBPUSD', 'sell', 1.0, '2023-08-06 23:48:46+00', 1.08904, '2023-08-07 04:11:46+00', 1.08912, 1.09204, 1.08504, 0.0, 0.5, -7507.0, -0.8),
      (user_record.id, 'A', '101000020', 'GBPJPY', 'buy', 2.0, '2024-07-06 18:28:46+00', 154.048, '2024-07-06 19:27:46+00', 154.037, 154.045, 154.052, -12.0, 2.2, -2157.0, -1.1),
      (user_record.id, 'A', '101000021', 'EURUSD', 'buy', 1.0, '2023-07-03 22:56:46+00', 1.01769, '2023-07-04 03:38:46+00', 1.01761, 1.01469, 1.02169, 0.0, -2.7, -7614.0, -0.8),
      (user_record.id, 'A', '101000022', 'GBPJPY', 'sell', 1.0, '2023-11-07 15:51:46+00', 147.986, '2023-11-07 17:35:46+00', 147.904, 147.989, 147.982, 0.0, 5.3, 8183.0, 8.2),
      (user_record.id, 'A', '101000023', 'EURJPY', 'sell', 0.5, '2024-02-29 16:08:46+00', 117.838, '2024-02-29 21:02:46+00', 117.998, 117.841, 117.834, -12.0, -9.2, -7979.0, -16.0),
      (user_record.id, 'A', '101000024', 'USDJPY', 'sell', 2.0, '2023-09-17 08:34:46+00', 141.032, '2023-09-17 09:31:46+00', 141.074, 141.035, 141.028, 0.0, 4.2, -8287.0, -4.2),
      (user_record.id, 'A', '101000025', 'GBPUSD', 'buy', 1.0, '2025-09-17 15:53:46+00', 1.42203, '2025-09-17 16:45:46+00', 1.42206, 1.41903, 1.42603, -12.0, -2.0, 2356.0, 0.3)
    ON CONFLICT (ticket) DO NOTHING;
  END LOOP;
END $$;
