/*
  # Update Demo Data with Realistic Trading Patterns

  1. Purpose
    - Replace existing demo data with more realistic trading scenarios
    - Add diverse win/loss patterns across datasets A, B, C
    - Include multiple currency pairs with varied performance

  2. Changes
    - Dataset A: Conservative trader (55% win rate, 4-5 pairs, EUR/USD focus)
    - Dataset B: Aggressive trader (48% win rate, 6-8 pairs, high volume)
    - Dataset C: Selective trader (62% win rate, 3-4 pairs, quality over quantity)

  3. Security
    - All data is owned by demo user with proper RLS policies
*/

DELETE FROM trades WHERE dataset IN ('A', 'B', 'C');

DO $$
DECLARE
  demo_user_id uuid := '4e4b6842-84ea-45a4-a8d0-e31a133bf054';
BEGIN
  -- Dataset A: Conservative trader with balanced approach
  INSERT INTO trades (user_id, dataset, ticket, item, side, size, open_time, open_price, close_time, close_price, sl, tp, commission, swap, profit, pips)
  VALUES
    -- EURUSD wins
    (demo_user_id, 'A', '101000001', 'EURUSD', 'buy', 1.5, '2025-01-02 08:30:00+00', 1.0850, '2025-01-02 14:20:00+00', 1.0875, 1.0820, 1.0900, -8, 2.1, 562500, 25),
    (demo_user_id, 'A', '101000002', 'EURUSD', 'sell', 1.8, '2025-01-03 10:15:00+00', 1.0890, '2025-01-03 16:45:00+00', 1.0865, 1.0920, 1.0840, -9, 3.2, 675000, 25),
    (demo_user_id, 'A', '101000003', 'EURUSD', 'buy', 1.6, '2025-01-04 09:00:00+00', 1.0870, '2025-01-04 15:30:00+00', 1.0900, 1.0840, 1.0920, -8, 2.8, 720000, 30),
    -- EURUSD losses
    (demo_user_id, 'A', '101000004', 'EURUSD', 'sell', 1.7, '2025-01-05 11:20:00+00', 1.0910, '2025-01-05 13:50:00+00', 1.0925, 1.0940, 1.0880, -9, 1.5, -382500, -15),
    (demo_user_id, 'A', '101000005', 'EURUSD', 'buy', 1.9, '2025-01-06 08:45:00+00', 1.0880, '2025-01-06 11:15:00+00', 1.0860, 1.0850, 1.0910, -10, 1.8, -570000, -20),

    -- USDJPY wins
    (demo_user_id, 'A', '101000006', 'USDJPY', 'buy', 2.0, '2025-01-07 09:30:00+00', 149.50, '2025-01-07 16:20:00+00', 149.85, 149.20, 150.00, -10, 3.5, 467900, 35),
    (demo_user_id, 'A', '101000007', 'USDJPY', 'sell', 2.2, '2025-01-08 10:00:00+00', 150.20, '2025-01-08 14:30:00+00', 149.90, 150.50, 149.70, -11, 2.9, 440880, 30),
    -- USDJPY losses
    (demo_user_id, 'A', '101000008', 'USDJPY', 'buy', 2.1, '2025-01-09 08:15:00+00', 150.00, '2025-01-09 10:45:00+00', 149.70, 149.50, 150.40, -11, 1.6, -420630, -30),
    (demo_user_id, 'A', '101000009', 'USDJPY', 'sell', 1.9, '2025-01-10 11:30:00+00', 149.80, '2025-01-10 13:20:00+00', 150.05, 150.20, 149.40, -10, 1.4, -317375, -25),

    -- GBPUSD wins
    (demo_user_id, 'A', '101000010', 'GBPUSD', 'buy', 1.4, '2025-01-11 09:45:00+00', 1.2750, '2025-01-11 15:30:00+00', 1.2785, 1.2720, 1.2800, -8, 2.7, 686000, 35),
    (demo_user_id, 'A', '101000011', 'GBPUSD', 'sell', 1.3, '2025-01-12 10:20:00+00', 1.2800, '2025-01-12 14:50:00+00', 1.2770, 1.2830, 1.2750, -7, 2.3, 546000, 30),
    -- GBPUSD losses
    (demo_user_id, 'A', '101000012', 'GBPUSD', 'buy', 1.5, '2025-01-13 08:30:00+00', 1.2760, '2025-01-13 10:15:00+00', 1.2735, 1.2730, 1.2800, -8, 1.2, -525000, -25),

    -- AUDUSD wins
    (demo_user_id, 'A', '101000013', 'AUDUSD', 'buy', 1.6, '2025-01-14 09:00:00+00', 0.6550, '2025-01-14 16:45:00+00', 0.6575, 0.6520, 0.6600, -9, 3.1, 560000, 25),
    (demo_user_id, 'A', '101000014', 'AUDUSD', 'sell', 1.5, '2025-01-15 10:30:00+00', 0.6580, '2025-01-15 15:20:00+00', 0.6560, 0.6610, 0.6540, -8, 2.6, 420000, 20);

  -- Dataset B: Aggressive trader with more trades and varied pairs
  INSERT INTO trades (user_id, dataset, ticket, item, side, size, open_time, open_price, close_time, close_price, sl, tp, commission, swap, profit, pips)
  VALUES
    -- EURUSD
    (demo_user_id, 'B', '102000001', 'EURUSD', 'buy', 2.5, '2025-01-02 07:30:00+00', 1.0845, '2025-01-02 09:45:00+00', 1.0860, 1.0825, 1.0880, -13, 1.8, 562500, 15),
    (demo_user_id, 'B', '102000002', 'EURUSD', 'sell', 2.8, '2025-01-02 11:20:00+00', 1.0870, '2025-01-02 12:30:00+00', 1.0885, 1.0890, 1.0850, -14, 1.2, -630000, -15),
    (demo_user_id, 'B', '102000003', 'EURUSD', 'buy', 2.6, '2025-01-03 08:15:00+00', 1.0880, '2025-01-03 10:50:00+00', 1.0895, 1.0860, 1.0910, -13, 1.5, 585000, 15),
    (demo_user_id, 'B', '102000004', 'EURUSD', 'sell', 3.0, '2025-01-03 14:00:00+00', 1.0900, '2025-01-03 15:15:00+00', 1.0920, 1.0925, 1.0875, -15, 0.9, -900000, -20),

    -- GBPUSD
    (demo_user_id, 'B', '102000005', 'GBPUSD', 'buy', 2.2, '2025-01-04 09:30:00+00', 1.2740, '2025-01-04 11:20:00+00', 1.2760, 1.2715, 1.2780, -12, 1.6, 616000, 20),
    (demo_user_id, 'B', '102000006', 'GBPUSD', 'sell', 2.4, '2025-01-04 13:45:00+00', 1.2770, '2025-01-04 14:50:00+00', 1.2790, 1.2800, 1.2745, -13, 0.8, -672000, -20),
    (demo_user_id, 'B', '102000007', 'GBPUSD', 'buy', 2.0, '2025-01-05 08:00:00+00', 1.2750, '2025-01-05 10:30:00+00', 1.2775, 1.2720, 1.2790, -11, 1.4, 700000, 25),

    -- USDJPY
    (demo_user_id, 'B', '102000008', 'USDJPY', 'sell', 3.2, '2025-01-06 09:15:00+00', 150.10, '2025-01-06 10:45:00+00', 150.30, 150.40, 149.80, -16, 0.7, -428160, -20),
    (demo_user_id, 'B', '102000009', 'USDJPY', 'buy', 2.9, '2025-01-06 12:30:00+00', 150.20, '2025-01-06 14:00:00+00', 150.45, 149.90, 150.60, -15, 1.1, 484975, 25),
    (demo_user_id, 'B', '102000010', 'USDJPY', 'sell', 3.1, '2025-01-07 08:45:00+00', 150.50, '2025-01-07 09:30:00+00', 150.70, 150.80, 150.20, -16, 0.6, -414020, -20),

    -- AUDUSD
    (demo_user_id, 'B', '102000011', 'AUDUSD', 'buy', 2.3, '2025-01-08 09:00:00+00', 0.6540, '2025-01-08 11:45:00+00', 0.6555, 0.6515, 0.6575, -12, 1.5, 483000, 15),
    (demo_user_id, 'B', '102000012', 'AUDUSD', 'sell', 2.5, '2025-01-08 13:20:00+00', 0.6560, '2025-01-08 14:15:00+00', 0.6575, 0.6585, 0.6535, -13, 0.8, -525000, -15),

    -- EURJPY
    (demo_user_id, 'B', '102000013', 'EURJPY', 'buy', 2.1, '2025-01-09 08:30:00+00', 162.40, '2025-01-09 10:15:00+00', 162.60, 162.10, 162.80, -11, 1.3, 420000, 20),
    (demo_user_id, 'B', '102000014', 'EURJPY', 'sell', 2.4, '2025-01-09 12:00:00+00', 162.70, '2025-01-09 13:30:00+00', 162.90, 163.00, 162.40, -13, 0.9, -480000, -20),
    (demo_user_id, 'B', '102000015', 'EURJPY', 'buy', 2.0, '2025-01-10 09:45:00+00', 162.50, '2025-01-10 11:20:00+00', 162.75, 162.20, 162.90, -11, 1.2, 500000, 25),

    -- GBPJPY
    (demo_user_id, 'B', '102000016', 'GBPJPY', 'sell', 1.9, '2025-01-11 08:15:00+00', 192.80, '2025-01-11 09:45:00+00', 193.00, 193.20, 192.40, -10, 0.7, -380000, -20),
    (demo_user_id, 'B', '102000017', 'GBPJPY', 'buy', 1.8, '2025-01-11 11:30:00+00', 192.90, '2025-01-11 13:00:00+00', 193.15, 192.55, 193.30, -10, 1.0, 450000, 25),

    -- USDCAD
    (demo_user_id, 'B', '102000018', 'USDCAD', 'sell', 2.2, '2025-01-12 09:00:00+00', 1.3550, '2025-01-12 10:30:00+00', 1.3535, 1.3565, 1.3525, -12, 1.1, 243320, 15),
    (demo_user_id, 'B', '102000019', 'USDCAD', 'buy', 2.4, '2025-01-12 13:15:00+00', 1.3540, '2025-01-12 14:00:00+00', 1.3560, 1.3520, 1.3575, -13, 0.8, 354528, 20),

    -- NZDUSD
    (demo_user_id, 'B', '102000020', 'NZDUSD', 'buy', 2.0, '2025-01-13 08:45:00+00', 0.6150, '2025-01-13 10:20:00+00', 0.6165, 0.6125, 0.6180, -11, 1.3, 420000, 15),
    (demo_user_id, 'B', '102000021', 'NZDUSD', 'sell', 2.1, '2025-01-13 12:30:00+00', 0.6170, '2025-01-13 13:15:00+00', 0.6185, 0.6190, 0.6145, -11, 0.7, -441000, -15);

  -- Dataset C: Selective trader with high win rate
  INSERT INTO trades (user_id, dataset, ticket, item, side, size, open_time, open_price, close_time, close_price, sl, tp, commission, swap, profit, pips)
  VALUES
    -- EURUSD wins (high quality)
    (demo_user_id, 'C', '103000001', 'EURUSD', 'buy', 1.2, '2025-01-02 09:00:00+00', 1.0850, '2025-01-02 17:30:00+00', 1.0895, 1.0820, 1.0920, -7, 4.2, 810000, 45),
    (demo_user_id, 'C', '103000002', 'EURUSD', 'sell', 1.3, '2025-01-04 10:15:00+00', 1.0900, '2025-01-04 18:45:00+00', 1.0860, 1.0930, 1.0840, -7, 4.8, 780000, 40),
    (demo_user_id, 'C', '103000003', 'EURUSD', 'buy', 1.1, '2025-01-07 08:30:00+00', 1.0870, '2025-01-07 16:20:00+00', 1.0920, 1.0835, 1.0940, -6, 4.5, 825000, 50),
    (demo_user_id, 'C', '103000004', 'EURUSD', 'sell', 1.4, '2025-01-10 09:45:00+00', 1.0910, '2025-01-10 17:30:00+00', 1.0875, 1.0945, 1.0850, -8, 5.1, 735000, 35),
    -- EURUSD losses (rare but exist)
    (demo_user_id, 'C', '103000005', 'EURUSD', 'buy', 1.2, '2025-01-13 10:00:00+00', 1.0890, '2025-01-13 11:30:00+00', 1.0865, 1.0860, 1.0925, -7, 1.5, -450000, -25),

    -- GBPUSD wins
    (demo_user_id, 'C', '103000006', 'GBPUSD', 'buy', 1.0, '2025-01-03 09:30:00+00', 1.2750, '2025-01-03 18:15:00+00', 1.2800, 1.2710, 1.2830, -6, 4.0, 700000, 50),
    (demo_user_id, 'C', '103000007', 'GBPUSD', 'sell', 1.1, '2025-01-06 10:00:00+00', 1.2790, '2025-01-06 17:45:00+00', 1.2745, 1.2825, 1.2720, -6, 4.3, 693000, 45),
    (demo_user_id, 'C', '103000008', 'GBPUSD', 'buy', 1.2, '2025-01-09 09:15:00+00', 1.2760, '2025-01-09 16:30:00+00', 1.2800, 1.2720, 1.2830, -7, 4.1, 672000, 40),

    -- USDJPY wins
    (demo_user_id, 'C', '103000009', 'USDJPY', 'buy', 1.5, '2025-01-05 09:00:00+00', 149.80, '2025-01-05 18:30:00+00', 150.25, 149.40, 150.60, -8, 5.0, 450900, 45),
    (demo_user_id, 'C', '103000010', 'USDJPY', 'sell', 1.4, '2025-01-08 10:30:00+00', 150.40, '2025-01-08 17:15:00+00', 149.95, 150.80, 149.70, -8, 4.6, 420210, 45),
    (demo_user_id, 'C', '103000011', 'USDJPY', 'buy', 1.6, '2025-01-12 09:45:00+00', 150.00, '2025-01-12 18:00:00+00', 150.50, 149.55, 150.85, -9, 5.2, 534800, 50),
    -- USDJPY loss
    (demo_user_id, 'C', '103000012', 'USDJPY', 'sell', 1.5, '2025-01-14 10:15:00+00', 150.30, '2025-01-14 11:45:00+00', 150.60, 150.70, 149.80, -8, 1.8, -300450, -30),

    -- EURJPY wins
    (demo_user_id, 'C', '103000013', 'EURJPY', 'buy', 1.3, '2025-01-11 09:00:00+00', 162.40, '2025-01-11 17:30:00+00', 162.95, 161.95, 163.30, -7, 4.7, 715000, 55);

END $$;
